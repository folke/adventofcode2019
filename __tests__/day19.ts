import { Beam } from '../src/day19'
import { Grid } from '../src/utils'

test('Check if traced beam is the same as the intcode beam', () => {
    const size = 20
    const beam = new Beam()
    beam.exploreMap(size)

    for (let x = 0; x < size; x++) {
        for (let y = 0; y < size; y++) {
            expect(beam.get(x, y) || '.').toBe(beam.check(x, y))
        }
    }
})

test('Check total amount of pulling locations', () => {
    const beam = new Beam()
    beam.exploreMap(50)
    expect(beam.countPullingLocations()).toBe(110)
})

test('Check ship beam algorithm', () => {
    const input = `#.......................................
.#......................................
..##....................................
...###..................................
....###.................................
.....####...............................
......#####.............................
......######............................
.......#######..........................
........########........................
.........#########......................
..........#########.....................
...........##########...................
...........############.................
............############................
.............#############..............
..............##############............
...............###############..........
................###############.........
................#################.......
.................##################.....
..................##################....
...................###################..
....................####################
.....................###################
.....................###################
......................##################
.......................#################
........................################
.........................###############
..........................##############
..........................##############
...........................#############
............................############
.............................###########`
    const beam = new Beam()
    const grid = new Grid<string>()
    grid.read(input.split(''), '\n')

    // eslint-disable-next-line @typescript-eslint/unbound-method
    beam.check = function(x: number, y: number): string {
        return grid.get(x, y) || '.'
    }
    // beam.grid.read(input.split(''), '\n')
    expect(beam.findShip(10, 35)).toEqual([25, 20])
})
